@model List<EntityLayer.Entities.Cart>
@{
    ViewBag.Title = "Index";
    Layout = "~/Views/Shared/DefaultLayout.cshtml";
}



<section>
    <div class="container mt-5 ">
        <div class="row mb-5">
            <div class="col-lg-8 pe-xl-5">
                <div class="cart mb-5">
                    <div class="cart-body">
                        <!-- Product-->
                        @foreach (var item in Model)
                        {
                            <div class="cart-item">
                                <div class="row d-flex align-items-center text-start text-md-center">
                                    <div class="col-12 col-md-5">
                                        <a class="cart-remove close mt-3 d-md-none" href="#"><i class="fa fa-times">                                                                                   </i></a>
                                        <div class="d-flex align-items-center">
                                            <a href="detail-1.html"><img class="cart-item-img" src="/Content/img/@item.Product.Image" alt="..."></a>
                                            <div class="cart-title text-start">
                                                <a class="text-dark link-animated" href="detail-1.html"><strong>@item.Product.Name</strong></a><br><span class="text-muted text-sm">Size: @item.Product.Size.Name</span><br>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-12 col-md-7 mt-4 mt-md-0">
                                        <div class="row align-items-center">
                                            <div class="col-md-3">
                                                <div class="row">
                                                    <div class="col-6 col-md-12 text-end text-md-center">@item.Product.Price</div>
                                                </div>
                                            </div>
                                            <div class="col-md-4">
                                                <div class="row align-items-center">
                                                    <div class="col-5 col-sm-3 col-md-12">
                                                        <div class="d-flex align-items-center">
                                                            @Html.ActionLink("-", "azalt", new { id = item.Id }, new { @class = "btn btn-items btn-items-decrease azalt" })
                                                            @Html.TextBoxFor(x => item.Quantity, new { @class = "form-control text-center border-0 border-md input-items txt", data_id = item.Id }) @*<input class="form-control text-center border-0 border-md input-items" type="text" value="4">*@
                                                            @Html.ActionLink("+", "arttir", new { id = item.Id }, new { @class = "btn btn-items btn-items-increase arttir" })
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-md-3">
                                                <div class="row">
                                                    @Convert.ToDateTime(item.Date).ToString("dd/MM/yyyy")
                                                </div>
                                            </div>
                                            <div class="col-1 d-none d-md-block text-center">
                                                <a class="cart-remove text-muted" href="#">
                                                    @Html.ActionLink(" ", "Delete", new { id = item.Id }, new { @class = "fa-solid fa-xmark" })
                                                </a>
                                            </div>
                                            <div class="col-1 d-none d-md-block text-center">
                                                <a href="/Sales/Buy/@item.Id"><i class="fa-solid fa-cart-shopping"></i></a>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        }
                    </div>
                </div>
                <div class="d-flex justify-content-center flex-column flex-lg-row mb-5 mb-lg-0">
                    @if (Model.Count > 0)
                    {
                        <a class="btn btn-link text-primary" href="/Cart/DeleteRange">
                            <i class="fa fa-sync"></i> Hepsini Sil
                        </a>
                    }
                </div>
            </div>
            <div class="col-lg-4">
                <div class="card mb-5">
                    <div class="card-header">
                        <h6 class="mb-0">Sipariş Özeti</h6>
                    </div>
                    <div class="card-body py-4">
                        <table class="table card-text">
                            <tbody>
                                <tr>
                                    <th class="pt-4 border-0">Toplam</th>
                                    <td class="pt-4 h6 fw-normal border-0">@ViewBag.Tutar</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div class="card-footer overflow-hidden p-0">
                        <div class="d-grid">
                            <a class="btn btn-primary py-3" href="/Sales/BuyAll">Satışı tamamla <i class="fa fa-chevron-right ms-2"></i></a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>
<!-- Sidebar Cart Modal-->
<div class="modal fade modal-right" id="sidebarCart" tabindex="-1" role="dialog">
    <div class="modal-dialog" role="document">
        <div class="modal-content sidebar-cart-content">
            <div class="modal-header mb-3 border-0">
                <button class="btn-close btn-close-lg btn-close-rotate opacity-8" type="button" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body px-5 sidebar-cart-body">
                <!-- Empty cart snippet-->
                <!-- In case of empty cart - display this snippet + remove .d-none-->
                <div class="d-none text-center mb-5">
                    <svg class="svg-icon w-3rem h-3rem svg-icon-light mb-4 text-muted">
                        <use xlink:href="#retail-bag-1"> </use>
                    </svg>
                    <p>Your cart is empty </p>
                </div>
                <!-- Empty cart snippet end-->
                <div class="sidebar-cart-product-wrapper custom-scrollbar mCustomScrollbar _mCS_1 mCS_no_scrollbar">
                    <div id="mCSB_1" class="mCustomScrollBox mCS-dark-thin mCSB_vertical mCSB_inside" style="max-height: none;" tabindex="0">
                        <div id="mCSB_1_container" class="mCSB_container mCS_y_hidden mCS_no_scrollbar_y" style="position:relative; top:0; left:0;" dir="ltr">
                            <div class="navbar-cart-product">
                                <div class="d-flex align-items-center">
                                    <a href="detail-1.html"><img class="img-fluid navbar-cart-product-image mCS_img_loaded" src="https://d19m59y37dris4.cloudfront.net/varkala/2-1/img/product/product-square-serrah-galos-494312-unsplash.jpg" alt="..."></a>
                                    <div class="w-100">
                                        <a class="navbar-cart-product-remove" href="#!">
                                            <svg class="svg-icon sidebar-cart-icon">
                                                <use xlink:href="#close-1"> </use>
                                            </svg>
                                        </a>
                                        <div class="ps-3"> <a class="navbar-cart-product-link text-dark link-animated" href="detail-1.html">White Tee</a><small class="d-block text-muted">Quantity: 1 </small><strong class="d-block text-sm">$75.00     </strong></div>
                                    </div>
                                </div>
                            </div>
                        </div><div id="mCSB_1_scrollbar_vertical" class="mCSB_scrollTools mCSB_1_scrollbar mCS-dark-thin mCSB_scrollTools_vertical" style="display: none;"><div class="mCSB_draggerContainer"><div id="mCSB_1_dragger_vertical" class="mCSB_dragger" style="position: absolute; min-height: 30px; top: 0px;"><div class="mCSB_dragger_bar" style="line-height: 30px;"></div><div class="mCSB_draggerRail"></div></div></div></div>
                    </div>
                </div>
            </div>
            <div class="modal-footer sidebar-cart-footer shadow">
                <div class="w-100">
                    <h5 class="mb-4">Subtotal: <span class="float-right">$465.32</span></h5>
                    <div class="d-grid gap-3"><a class="btn btn-outline-dark" href="cart.html">View cart</a><a class="btn btn-dark" href="checkout.html">Checkout</a></div>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- Sidebar Modal Right-->
<div class="modal fade modal-right" id="sidebarRight" tabindex="-1" role="dialog" aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header border-0">
                <button class="btn-close btn-close-lg btn-close-rotate" type="button" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body px-5 pb-5">
                <div>
                    <h5 class="mb-5 aos-init aos-animate" data-aos="zoom-in" data-aos-delay="50">Varkala</h5>
                    <ul class="nav flex-column mb-5">
                        <li class="nav-item active"><a class="nav-link ps-0" href="#">Home </a></li>
                        <li class="nav-item"><a class="nav-link ps-0" href="#">Link</a></li>
                        <li class="nav-item"><a class="nav-link ps-0 disabled" href="#">Disabled</a></li>
                        <li class="nav-item dropdown">
                            <a class="nav-link ps-0 dropdown-toggle" id="navbarDropdownMenuLink" href="#" data-bs-target="#sidebarSubmenu" data-bs-toggle="collapse" aria-haspopup="true" aria-expanded="false">Dropdown link</a>
                            <div class="collapse" id="sidebarSubmenu">
                                <ul class="nav flex-column ms-3">
                                    <li class="nav-item"><a class="nav-link ps-0" href="#">Action</a></li>
                                    <li class="nav-item"><a class="nav-link ps-0" href="#">Another action</a></li>
                                    <li class="nav-item"><a class="nav-link ps-0" href="#">Something else here                </a></li>
                                </ul>
                            </div>
                        </li>
                    </ul>
                    <ul class="list-inline mb-4">
                        <li class="list-inline-item me-2"><i class="fab fa-facebook-f"> </i></li>
                        <li class="list-inline-item me-2"><i class="fab fa-twitter"> </i></li>
                        <li class="list-inline-item me-2">
                            <svg class="svg-icon me-2">
                                <use xlink:href="#calls-1"> </use>
                            </svg>020-800-456-747
                        </li>
                    </ul>
                    <p class="text-sm text-muted mb-0">Samsa was a travelling salesman - and above it there hung a picture that he had recently cut out of an illustrated magazine and housed in a nice, gilded frame.</p>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- Login Modal    -->
<div class="modal fade" id="loginModal" tabindex="-1" role="dialog" aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <button class="btn-close btn-close-absolute btn-close-lg btn-close-rotate" type="button" data-bs-dismiss="modal" aria-label="Close">     </button>
            <div class="modal-body p-5">
                <ul class="nav list-inline" role="tablist">
                    <li class="list-inline-item"><a class="nav-link nav-link-lg active" data-bs-toggle="tab" href="#loginModalTabLogin" role="tab" id="loginModalLinkLogin" aria-controls="loginModalTabLogin" aria-selected="true">Login</a></li>
                    <li class="list-inline-item"><a class="nav-link nav-link-lg" data-bs-toggle="tab" href="#loginModalTabRegister" role="tab" id="loginModalLinkRegister" aria-controls="loginModalTabRegister" aria-selected="false">Register</a></li>
                </ul>
                <hr class="mb-3">
                <div class="tab-content">
                    <div class="tab-pane active fade show px-3" id="loginModalTabLogin" role="tabpanel" aria-labelledby="loginModalLinkLogin">
                        <form action="customer-orders.html" method="get">
                            <div class="mb-3">
                                <label class="form-label" for="email">Email</label>
                                <input class="form-control" id="email" type="text">
                            </div>
                            <div class="mb-3">
                                <div class="row">
                                    <div class="col">
                                        <label class="form-label" for="loginPassword"> Password</label>
                                    </div>
                                    <div class="col-auto"><a class="form-text small" href="#">Forgot password?</a></div>
                                </div>
                                <input class="form-control" name="loginPassword" id="loginPassword" placeholder="Password" type="password" required="" data-msg="Please enter your password">
                            </div>
                            <div class="mb-3">
                                <div class="form-check">
                                    <input class="form-check-input" id="loginRemember" type="checkbox">
                                    <label class="form-check-label text-muted" for="loginRemember"> <span class="text-sm">Remember me for 30 days</span></label>
                                </div>
                            </div>
                            <div class="d-grid mb-3">
                                <button class="btn btn-outline-dark" type="submit"><i class="fa fa-sign-in-alt me-2"></i> Log in</button>
                            </div>
                        </form>
                        <hr class="my-3 hr-text letter-spacing-2" data-content="OR">
                        <div class="text-center">
                            <button class="btn btn btn-outline-primary letter-spacing-0" data-bs-toggle="tooltip" title="" data-bs-original-title="Connect with Facebook"><i class="fa-fw fa-facebook-f fab"></i><span class="sr-only">Connect with Facebook</span></button>
                            <button class="btn btn btn-outline-muted letter-spacing-0" data-bs-toggle="tooltip" title="" data-bs-original-title="Connect with Google"><i class="fa-fw fa-google fab"></i><span class="sr-only">Connect with Google</span></button>
                        </div>
                    </div>
                    <div class="tab-pane fade px-3" id="loginModalTabRegister" role="tabpanel" aria-labelledby="loginModalLinkRegister">
                        <p class="text-muted text-sm">The bedding was hardly able to cover it and seemed ready to slide off any moment. His many legs, pit.                                            </p>
                        <form action="customer-orders.html" method="get">
                            <div class="mb-3">
                                <label class="form-label" for="registerName">Name</label>
                                <input class="form-control" id="registerName" type="text">
                            </div>
                            <div class="mb-3">
                                <label class="form-label" for="registerEmail">Email</label>
                                <input class="form-control" id="registerEmail" type="text">
                            </div>
                            <div class="mb-3">
                                <label class="form-label" for="registerPassword">Password</label>
                                <input class="form-control" id="registerPassword" type="password">
                            </div>
                            <div class="d-grid mb-3 text-center">
                                <button class="btn btn-outline-dark" type="submit"><i class="far fa-user me-2"></i>Register                       </button>
                            </div>
                        </form>
                        <hr class="my-3 hr-text letter-spacing-2" data-content="OR CONNECT WITH">
                        <div class="text-center">
                            <button class="btn btn btn-outline-primary letter-spacing-0" data-bs-toggle="tooltip" title="" data-bs-original-title="Connect with Facebook"><i class="fa-fw fa-facebook-f fab"></i><span class="sr-only">Connect with Facebook</span></button>
                            <button class="btn btn btn-outline-muted letter-spacing-0" data-bs-toggle="tooltip" title="" data-bs-original-title="Connect with Google"><i class="fa-fw fa-google fab"></i><span class="sr-only">Connect with Google                                      </span></button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script>
    $(function () {
        $('.txt').on('change', function () {
            var miktar = $(this).val();
            var sepetId = $(this).attr('data-id');
            $.ajax({
                url: '/Cart/DinamikMiktar',
                data: { id: sepetId, miktari: miktar },
                success: function (res) {
                    document.location.reload();
                }
            })
        })
    });
</script>










